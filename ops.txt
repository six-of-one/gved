./gved -h
- gives all command line parameters and a few examples

interactive system:
------------------
./gved -i

the menu bar lists key commands available, which mode is active
and various edit status details
- with mouse drag it measures pixels, cells and cell size
- a single click gives cell content (must toggle edit 1 time)

the program title shows maze #, maze address and buffer # when loaded
- when switching G¹ / G² it will also list that with G¹ revision

config options are now saved in .config
- so far: win width x height, viewport size and assigned edit keys
- launch with './gved -i --def' to restore ALL defaults

general controls:		(general keys are always available in both modes)
----------------

<CTRL>-Q	quit program - use this or file->exit, need save dialog blocks
			file->quit and window [X] (see menu ops - Quit)

q, q		close all dialogs/ windows EXCEPT program main window

?			command key hints, most dialogs - sub-window specific
			main win dialog will reconfigure based on edit mode & keys

#a	load maze #
	(G¹ valid 1-127, G² valid 1-117)
A	enable address mode (experimental, likely never work with arcade emu)
	- load a maze from ANY address that will not crash the engine
	  (address list at end of constants.go)
	- when enabled #a will load any valid address in range 229376 - 262143
	- pgup, pgdn will also cycle -, + to the next *valid* address

- note: A mode was used to discover address that would decode G¹ mazes
		the engine was never intended to read maze data this way

	keys to operate a window, can be used from its dialogs
	so: <HOME> opens pallet, ? opens pallet help, l from the help dialog
		will open edit key list and so on
	there are no limits right now, it is possible to open all the dialogs
	you want - the caveat is live track dialogs (edit keys, stats, etc)
	will lose focus when a second instance is opened. you were warned


two op modes exist, view only and edit

<ESC>	edit mode on viewport - initializes current maze to disk in .ed/
<ESC>	set mode 2 - edit full view of maze
<ESC>	turn edit off/ view back on and check for unsaved data
		- Escape key cycles these 3 options

S	cycle through all save data buffers in .ed/sd#####_g?.ed
	- while cycling any edits to current maze are autosaved !
	- buffer edits will also auto save (including std maze ones)
	- limit is currently 999 buffers
#L	load buffer #####							(current limit 999 bufs)
#S	save current visible maze as buffer #####
	- while sd buffers are available in view mode, no view mode changes
	  (fgwqhmrR) will be saved

pgup 	previous maze	or	previous sd buf
pgdn	next maze			next sd buf
							- when sd view is active, pgup stops at 1
							- pgdn will exit to mazes on last buf

View mazes only:		( and cmd keys in edit )
---------------

i	gauntlet mazes G¹ rev 1-9
l	gauntlet mazes G¹ rev 14
u	gauntlet 2 mazes G² all

v	list G¹ or G² maze address set to terminal where gved was launched


these keys are temporary in view mode and edit the buffer in edit mode
- with edit off, these will not operate on sd buf mazes

f,F	 + or - floor pattern in cycle of all patterns
g,G	 + or - floor colors in cycle of all colors
w,W	 + or - wall pattern in cycle
e,E	 + or - wall colors in cycle
#	and #f, #g, #w, #q - set valid pats / cols #, with invalid going to 0

h	horizontally mirror the maze
	(G¹ does h,m after many levels, G² from maze 1)
m	vertically mirror "flip" the maze (same G¹ / G² note)
	- doing both rotates maze 180°

r	[ sanctuary only! ] rotate maze +90°
R	[ sanctuary only! ] rotate maze -90°
	- gauntlet arcade does NOT do this
	- this is only a feature of the sanctuary port
t	set rotate to 0°	(not available in edit mode!)

following keys are visible effect only, no edit changes are made
t,T in palette window gives this list in dialog

s	display random "special potions" and gold bags on emply floor tiles
L	toggle generator indicator letters [ DGLS ] showing box gen monster
p	toggle floor invisible * (renders transparent in output png)
P	toggle walls invisible *
T	loop through a set of invisible flags or, *
#T	set invisible flag set - hide vars maze elements: *
	NOGEN = 1		// all generators
	NOMON = 2		// all monster, dragon
	NOFUD = 4		// all food
	NOTRS = 8		// treas, locked
	NOPOT = 16		// pots & t.powers
	NODOR = 32		// doors, keys
	NOTRAP = 64		// trap & floor dots, stun, ff tiles
	NOEXP = 128		// exit, push wall
	NOTHN = 256		// anything else left
	NOFLOOR = 512
	NOWALL = 1024	// G² *walls
	NOG1W = 2048	// G¹ std wall only
- these are hidden only and still present in maze

<CTRL>-T reset invisible flags to 0

(* hide items will disable when edit keys active)

Edit mazes:
----------

because sanctuary has no maze size limit, editing is now in a view port,
default to 21 x 21 cells, adjusted with ctrl-pgup/ ctrl-pgdn
- when in view mode and looking at sd buf mazes the viewport is simulated
  at 32 x 32, but if mazes are larger

** when entering edit mode window size will be adjusted to provide A
   "square" cell size representing 16 px by 16 px at default resolution
   and scaling up for larger window sizes

in edit mode with cmd keys set, many of the view mode keys still function
- fF, gG, wW, qQ, h, m, rR however, all cause edit buffer changes

edit mode stores changes in buffer files in subdir .ed
there is as yet no way, *with gved*, to recompress and store mazes in rom

sanctuary engine extra features has an xb-line for its hexadecimal cfg
this will be opened entering any edit mode and will need repositioned
the data entered will be some esoteric tech wizardy with a guide elsewhere

most of these have a corresponging item on edit or file menus

<SH-CTRL>-S	save current buffer for maze to disk as a generic file save
			- typing a # first will pre-pend that as the mazes #
			  (it does not cause it to load that # for now)
<SH-CTRL>-L	load generic file save from disk into edit buffer
			- these are NOT compatible with below, doing a <CTRL>-S after
			  a generic load WILL overwrite the buffer for current maze #

<CTRL>-S	save G? edit buffer for maze # to disk as .ed/g{?}maze{###}.ed
			- A (address) mode will NOT save edit buffer for address,
			  it will save to current maze #
<CTRL>-L	load edit buffer from disk from buffer for maze#
<CTRL>-R	reset edit buffer for current maze # from rom
			- these are also on the edit menu

<CTRL>-C	do copy contents of next Left-click mouse drag
<CTRL>-X	do cut contents of next Left-click mouse drag - put in floor
<CTRL>-P	paste contents of c/c/p buffer at Left-click location
			- on paste blotter is replaced with image of paste buffer
			- c/c/p are 'sticky', they stay on, select again to turn off,
			or select another edit action

<CTRL>-Z	undo last op - currently holds {all mem until its unworkable}
			units (single maze cell) of undo
<CTRL>-Y	redo last undo up to last change entered
			-undo back 5 or 10 and place a new item and the forward chain
			is lost
<CTRL>-U	when the maze is loaded from disk an ulternate buffer is
			stored and ctrl-U swaps them
			- both can be edited, but both can not yet be saved
			- not working in view only mode

<CTRL>-V	toggle gauntlet view simulate - a blotter rectangle size of
			the arcade maze view, follows mouse

<CTRL>-pgup	size up viewport (to max 32 x 32)
<CTRL>-pgdn	size down viewport (to min 12 x 12)
			- viewport will still fill edit window
↑↓←→		(up/ dn/ lf/ rt keys)
			- move maze in viewport 4 units
			- move 1 unit if <SHIFT> key held
<CTRL> +
↑↓←→		adjust size of maze, -,+,-,+ 1 unit in direction
			- -,+ 4 units if <SHIFT> key held
			- once you shrink/ save, and reload, exit, init, blank, etc
			  the former cell contents you shrunk past will be gone

<SH-CTRL>-P	roll thru session paste buffer, loading each one
<SH-CTRL>-O	roll thru master paste buffer, loading each one
			- auto switching G¹ to G²

when pb window is selected:
[			master paste buffer --
]			master paste buffer ++
o			session paste buffer --
p			session paste buffer ++
q,Q			close subwindow		(also pal window)
r, R		rotate content +90°, -90°
h, M		horiz, vert mirror
a,s,d,W		expand or contract pb chunk
			- pb changes autosave
S			window that live updates with maze stats and flags
l			window with live updates listing all edit keys
t			#T hide flags info sheet
			see mouse ops too...

<HOME>		toggle a complete item palette for G¹ / G²
			- palette for G¹ / G² in subwindow
			  (position can not be code controlled, you have to move it)
			- auto switching G¹ to G²
palette keys:
			- middle click on item (edit goes active, def key selects)
s			window that live updates with maze stats and flags
l			window with live updates listing all edit keys
t			#T hide flags info sheet
f			gauntlet 2 maze flags sheet
x			gauntlet 2 secret room sheet
q			close palette window

certain ops will check for unsaved changes and launch a dialog to save
(pgup, pgdn, a, <ESC>, i, l, u, ctrl-q )

\	toggle cmd keys and edit keys		(only while in edit mode)

c,C	cycle -,+ maze element on this edit key, looping over 1 - 64, and
              activate key for placement
	- 'c' can be still assigned any value, 'C' can not be assigned
#c	assign cycle key to #, in range of 1 - 64

H	toggle horizontal wrap - Y column = 32 will be removed/ restored (will
    restore on toggle with contents intact until saved)
M	toggle vertical wrap   - X row = 32 will likewise be removed/ restored

Mouse operation
---------------

Left-click		place current edit key item in maze at cursor in edit mode
Middle-click	assign item at cursor to current edit key (assigned floor
				will not place)
				- edit mode on, cmds off and sets def key if no edkey
				  selected
Right-click		continue last pgup/ pgdn op in window selected
				* when paste buffer win selected these do the same op

Left-click drag	- dragging to new location - fill / delete the encompassed
				  rectangle in edit mode with selectd edit key / floor
				- CUT, COPY will do op with blotter rectangle
				- no mode - rectangle displayed while mouse btn held down
				  measurement in menu hint bar / stats in stat dialog

key held with Left-click

delete			place a floor at cursor
shift-delete	nullify cell at cursor (display color 0, content = -1)

control			when dragging edit, box will fill/ delete an outline only

key held during mouse move (no click or other ops)

logo (win key)	paint operation:
				hold key down, move mouse
				edit keys on - paint the selected item where mouse moves
				ctrl-del lock - delete items where mouse moves

** EDIT KEYS **
---------------
edit keys are item placement reassignable keys

hit <ESC> to edit mazes
hit '\' to activate / deactivate edit keys
(when not in edit keys, cmd keys from view mode are active)

press a key, the item assigned to that key will be placed in the maze with
a Left-click mouse button
- while a key is active, middle-click mouse button on any maze item
  re-assigns that key to that item

- edit status will indicate when a key is selected or assigned, and what
  it places


these are pre-defined for G¹ / G², and re-assignable:

d	horiz door
D	vert door
w	normal walls
W	shootable walls
q	trap wall (needs trap tile)
r	trap tile to release walls
f	food, shootable
F	food, non shootable
p	potion, shootable
P	potion, non shootable
k	key
i - invisible power
x - exit
z - Death
t	treasure
T	teleporter

G¹ extra

b	bag treasure
g	lvl 3 ghost
G	lvl 3 grunt
h	lvl 2 grun gen
l	lvl 2 lobber gen
n	lvl 3 ghost gen
m	lvl 2 demon gen

G² extra

b	forcefield hub
m	pushable wall
n	acid blob
o	super sorceror
R	random wall section
s	stun tile

any key in this grid without an * is an edit key

  30 =          !  "  #  $  %  &  '
  40 = (  )  *  +  ,  -  .  /  0  1
  50 = 2  3  4  5  6  7  8  9  :  ;
  60 = <  =  >  ?* @  A* B  C* D  E
  70 = F  G  H* I  J  K  L* M  N  O
  80 = P  Q  R  S* T  U  V* W  X  Y
  90 = Z  [  \* ]  ^  _  `  a* b  c
 100 = d  e  f  g  h  i  j  k  l  m
 110 = n  o  p  q  r  s  t  u  v  w
 120 = x  y  z  {  |  }  ~

these are system reserved keys and can NOT be reassigned
?, \, C, aA, L, S, H, V

Menu operations
---------------

additional not covered above:

File:
Quit		- seems to be a default on 1st menu, currently blocked
			  (along with [X] close upper right window widget)
			  - need to save dialog must run which blocks file-quit

Exit		- use this, it does a buffer check and pops up a save dialog

Load		- loads maze from std file (not for files in directory .ed/)
Save		- saves maze to a std file,
              if # is set on title numeric: store that as maze #
				(maze numbers in files not currently used)

Blank		- fill buffer with blank maze, default floors & walls
              (must be in edit mode, can also use # keep)
Blank keep	- blank maze, but keep decor cols & pats, start, exits, and
			  if # is set on title numeric: use inversion of #T hide items
			  mask to preserve those
Mapper test	- vars random map generate algorithms
Random Load - empty tiles (floor) will be load with a random select
			  profile - uses #T filter if set as include filter

Mute audio	- toggle audio hint when selecting edit elements -middle click

Edit:
Paste buffer menu
Show		- bring up a paste buffer window with current content
Next Mas	- cycle master pb store fwd
Prior Mas	- cycle master pb store back
Next Ses	- cycle edit session pb store fwd
Prior Ses	- cycle edit session pb store back

Help:
Edit Keys	- live update list of edit key assignments in a dialog
Operation	- open this text in a dialog
License		- original gex code under GPL3, gved (new) code is GPL2

Cmds↓:
Options		- set and save various system options
Colors		- set various color options for view/ edit
Maze stats	- items counts for current maze, live updates
View Sim	- blotter is set to default gauntlet view port to simulate
			  what a player could see in any area (arcade)
Secret wall	- toggle displaying G² 'shootable secret' walls in palette+1
Wall border	- stored mazes have no bottom or right wall - this simulates them
Palette map - default: palette walls / floor match level cols & pats
			  toggles on and off (1st click shows palette if hidden)

---------------------------------------------
ops for sprite viewer

Gauntlet / G² rom - use this systems rom image (G² selected by G2 mode)
File rom, load the rom spec by file: {filename entry}
| ---- these 2 options apply to all roms
\_ palette type - select one of the palette types, which all limit pnum
 \_ pnum - select palette number entry for palette type
    - 0 - 16 floors/ walls, 0 - 31 base/ gbase,
	{ 0 - 3 wizard, warrior, valkyrie, elf },
	{ 0: trap, stun, secret, shrub, forcefield, teleff }

G2 mode - use Gauntlet II tile ops (differs from G1 mostly by palette)

Sprite sheet, load the png sheet spec by file: {filename entry}
- this has slight differences from rom mode

BUILD - build and display the view of sprites
      - NOTE: errors in user entry will be defaulted to bounds by builder

pixel size: build a bkg grafic this size square and fill best way possible
size x by y: x and y (col and row) of sprites to build from source
address: starting address in rom
         NOTE: currently bounded 0 - 65536, if past end this WILL crash!
keep: dont update rom address, just keep building same

Key shortcuts:

b		- build
t,r		- palette type +,-
p,o		- pnum +,-
x,z		- sprite size x (col) +,-
y,u		- sprite size y (row) +,-
b,v		- address +,-{sprite size = x*y}
←→		- address -,+			shift modify -,+ 4
↑↓		- address -10,+10		  shift modify -,+ 40
pgup	- address -100			  shift modify -,+ 1000
pgdn	- address +100

---------------------------------------------

Gauntlet / Gauntlet 2 visual editor
Author: Six [a programmer]

github.com/six-of-one/gved/